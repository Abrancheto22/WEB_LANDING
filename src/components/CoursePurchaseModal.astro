---
interface Props {
  course: {
    title: string;
    description: string;
    price: string;
    color: string;
  };
  onClose: () => void;
}

const { course, onClose } = Astro.props as Props;

const handleSubmit = (e: SubmitEvent) => {
  e.preventDefault();
  const form = e.target as HTMLFormElement;
  const formData = {
    nombre: form.nombre.value,
    email: form.email.value,
    telefono: form.telefono.value,
    metodoPago: form.metodoPago.value
  };
  
  console.log('Datos del formulario:', formData);
  // Aquí iría la lógica para enviar los datos al backend
  onClose();
};

---

<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-lg p-8 w-96 max-h-[90vh] overflow-y-auto">
    <h2 class="text-2xl font-bold mb-6 text-center">{course.title}</h2>
    
    <div class="mb-6">
      <p class="text-gray-600 mb-4">{course.description}</p>
      <span class="text-xl font-bold text-gray-900 block mb-4">${course.price}</span>
    </div>

    <form class="space-y-4" onsubmit="handleSubmit(event)">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre completo</label>
        <input 
          type="text" 
          name="nombre"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
          required 
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <input 
          type="email" 
          name="email"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
          required 
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Telefono</label>
        <input 
          type="tel" 
          name="telefono"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
          required 
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Metodo de pago</label>
        <select 
          name="metodoPago"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
          required 
        >
          <option value="">Selecciona...</option>
          <option value="transferencia">Transferencia bancaria</option>
          <option value="deposito">Deposito en efectivo</option>
          <option value="pago_movil">Pago móvil</option>
        </select>
      </div>

      <div class="flex justify-end space-x-4">
        <button 
          type="button" 
          onclick="onClose()"
          class="px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300"
        >
          Cancelar
        </button>
        <button 
          type="submit" 
          class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"
        >
          Comprar curso
        </button>
      </div>
    </form>
  </div>
</div>

---

// El componente ya está completo con el HTML directamente en el template anterior
